<!doctype html>
<html lang="en-us">
  <head>
    <title>Django REST Framework // AgilePhD</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.128.2">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Dr. James Davis" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.562871a81790ee61fbc41ddb89eacf3bc0967ee9bde46cf8764c66fe91f0e6fc.css" />
    

    
  


    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Django REST Framework">
  <meta name="twitter:description" content="Django and the Django REST Framework are a popular combination for building and maintaining robust Web APIs. The term API is a bit dated and stands for Application Program Interface. The important word is “Interface” in that the ability to communicate with other applications gives our web app value.
A version of this code can be found on GitHub.
HTTP The HTTP (Hypertext Transfer Protocol) protocol provides the structure for communicating files across the Internet.">

    <meta property="og:url" content="http://blog.agilephd.com/posts/django_rest_framework/">
  <meta property="og:site_name" content="AgilePhD">
  <meta property="og:title" content="Django REST Framework">
  <meta property="og:description" content="Django and the Django REST Framework are a popular combination for building and maintaining robust Web APIs. The term API is a bit dated and stands for Application Program Interface. The important word is “Interface” in that the ability to communicate with other applications gives our web app value.
A version of this code can be found on GitHub.
HTTP The HTTP (Hypertext Transfer Protocol) protocol provides the structure for communicating files across the Internet.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-01-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2020-01-18T00:00:00+00:00">
    <meta property="article:tag" content="Django">
    <meta property="article:tag" content="Python">


  </head>
  <body>
    <header class="app-header">
      <a href="http://blog.agilephd.com/"><img class="app-header-avatar" src="/tank1.jpg" alt="Dr. James Davis" /></a>
      <span class="app-header-title">AgilePhD</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>Dr. James Davis: data scientist, girl dad, combat veteran, and can&#39;t shutup about Blockchain.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/cavalryjim" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/jdavisphd/" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Django REST Framework</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jan 18, 2020
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          4 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="http://blog.agilephd.com/tags/django/">Django</a>
              <a class="tag" href="http://blog.agilephd.com/tags/python/">Python</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p><img src="../../drf.png" alt="drf"></p>
<p>Django and the Django REST Framework are a popular combination for building and maintaining robust Web APIs.  The term API is a bit dated and stands for Application Program Interface.  The important word is &ldquo;Interface&rdquo; in that the ability to communicate with other applications gives our web app value.</p>
<p>A version of this code can be found on <a href="https://github.com/cavalryjim/tweeter_v6">GitHub</a>.</p>
<h2 id="http">HTTP</h2>
<p>The HTTP (Hypertext Transfer Protocol) protocol provides the structure for communicating files across the Internet. HTTP contains request methods used to information. The most common requests are GET, POST, PUT, PATCH and DELETE.</p>
<table>
<thead>
<tr>
<th>HTTP Verb</th>
<th>CRUD Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>Read</td>
</tr>
<tr>
<td>POST</td>
<td>Create</td>
</tr>
<tr>
<td>PUT</td>
<td>Update</td>
</tr>
<tr>
<td>PATCH</td>
<td>Update (partial)</td>
</tr>
<tr>
<td>DELETE</td>
<td>Delete</td>
</tr>
<tr>
<td>=======</td>
<td></td>
</tr>
</tbody>
</table>
<p>HTTP provides the request-response protocol for communications between two applications.  The application making the request is known as the <em>client</em> and the application returning a response is known as the <em>server</em>.  Using an HTTP ver and an URL endpoint, the client submits the request.  After receiving the request, the server provides a response and a response code.  If the request was for data and it was processed successfully, the client usually receives data in the form of HTML or JSON.  Regardless, the server will respond with a code.</p>
<p>While HTTP has dozens of response codes, there are four basic outcomes to an HTTP request:</p>
<ul>
<li>it worked (200-level code)</li>
<li>it was redirected (300-level code)</li>
<li>error with the client&rsquo;s request (400-level code)</li>
<li>error with the server processing the request (500-level code).</li>
</ul>
<p>HTTP is a stateless protocol. Each request &amp; response interaction is independent of the previous one.  This makes HTTP very resilient because the status of one communication packet is not dependent on previous packets.</p>
<h2 id="rest">REST</h2>
<p>Representational state transfer (REST) is an architecture style for designing networked applications using the HTTP protocol.</p>
<p><strong>More Coming Soon</strong></p>
<p>Django REST Framework (DRF) is <strong>the</strong> goto package for building APIs with Django. DRF is robust, testable, well-documented, and comes with plenty of customizable features. DRF mimics Django’s conventions making it easy to learn and use.</p>
<h2 id="create-api-app">Create API App</h2>
<p>You could easily have a Django project that will only be accessed by APIs with no need for templates or returning HTML.  For the Tweeter project, we want both a web-version for users that want to interact via a browser and APIs for mobile apps or Progressive Web Apps (PWA).</p>
<p>We will create an API app inside our project for handling our API logic.</p>
<pre tabindex="0"><code>(tweeter_app) $ python manage.py startapp api
</code></pre><h2 id="install-drf">Install DRF</h2>
<p>Like other packages, we can install Django REST Framework via pipenv and add it to settings.py.</p>
<pre tabindex="0"><code>(tweeter_app) $ pipenv install djangorestframework
</code></pre><p>Update the <code>INSTALLED_APPS</code> list in our <code>tweeter_app/settings.py</code> file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>INSTALLED_APPS <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django.contrib.admin&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django.contrib.auth&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django.contrib.contenttypes&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django.contrib.sessions&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django.contrib.messages&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django.contrib.staticfiles&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;rest_framework&#39;</span>, <span style="color:#75715e"># new</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;bootstrap4&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;bootstrap_datepicker_plus&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;users&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;tweets&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;api&#39;</span>, <span style="color:#75715e"># new</span>
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># new</span>
</span></span><span style="display:flex;"><span>REST_FRAMEWORK <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;DEFAULT_PERMISSION_CLASSES&#39;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;rest_framework.permissions.AllowAny&#39;</span>,
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span></code></pre></div><h2 id="api-endpoints">API Endpoints</h2>
<p>In a RESTful architecture, an API endpoint typically refers to some object or set of objects. To be more specific, an endpoint is a reference to a URL that accepts web requests.</p>
<p>For our Tweeter API, an endpoint that lists all the tweets in the app could look like this: <a href="https://tweeter.com/api/v1/tweets/">https://tweeter.com/api/v1/tweets/</a></p>
<p>In general, we add the term &lsquo;api&rsquo;, or something similar, to the path and perhaps a version number.  Lets update the <code>tweeter_app/urls.py</code> file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># tweeter_app/urls.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib <span style="color:#f92672">import</span> admin
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.urls <span style="color:#f92672">import</span> path, include
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>urlpatterns <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;admin/&#39;</span>, admin<span style="color:#f92672">.</span>site<span style="color:#f92672">.</span>urls),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;&#39;</span>, include(<span style="color:#e6db74">&#39;tweets.urls&#39;</span>)),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;users/&#39;</span>, include(<span style="color:#e6db74">&#39;users.urls&#39;</span>)),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;api/v1/&#39;</span>, include(<span style="color:#e6db74">&#39;api.urls&#39;</span>)), <span style="color:#75715e"># new</span>
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;api-auth/&#39;</span>, include(<span style="color:#e6db74">&#39;rest_framework.urls&#39;</span>)), <span style="color:#75715e"># new</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Create an <code>api/urls.py</code> file that will further define two API endpoints.  One for viewing all tweets and another for interacting with single tweets.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># api/urls.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.urls <span style="color:#f92672">import</span> path
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .views <span style="color:#f92672">import</span> TweetList, TweetDetail
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>urlpatterns <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;tweets/&#39;</span>, TweetList<span style="color:#f92672">.</span>as_view()),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;tweets/&lt;int:pk&gt;/&#39;</span>, TweetDetail<span style="color:#f92672">.</span>as_view()),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h2 id="views">Views</h2>
<p>For creating the logic in our views, we will use the built-in generic views that comes with DRF.  This speeds development and makes the creation of our APIs more Django-ish.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># api/views.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework <span style="color:#f92672">import</span> generics
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> tweets.models <span style="color:#f92672">import</span> Tweet
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .serializers <span style="color:#f92672">import</span> TweetSerializer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TweetList</span>(generics<span style="color:#f92672">.</span>ListCreateAPIView):
</span></span><span style="display:flex;"><span>    queryset <span style="color:#f92672">=</span> Tweet<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()
</span></span><span style="display:flex;"><span>    serializer_class <span style="color:#f92672">=</span> TweetSerializer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TweetDetail</span>(generics<span style="color:#f92672">.</span>RetrieveUpdateDestroyAPIView):
</span></span><span style="display:flex;"><span>    queryset <span style="color:#f92672">=</span> Tweet<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()
</span></span><span style="display:flex;"><span>    serializer_class <span style="color:#f92672">=</span> TweetSerializer
</span></span></code></pre></div><h3 id="serializers">Serializers</h3>
<p>Most API frameworks offer conversion logic, such as serializers, that converts objects and datasets into an API friendly format, such json or xml.  DRF is no different.  Create a file called <code>api/serializers.py</code> with the following code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># api/serializers.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework <span style="color:#f92672">import</span> serializers
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> tweets.models <span style="color:#f92672">import</span> Tweet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TweetSerializer</span>(serializers<span style="color:#f92672">.</span>ModelSerializer):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Meta</span>:
</span></span><span style="display:flex;"><span>        model <span style="color:#f92672">=</span> Tweet
</span></span><span style="display:flex;"><span>        fields <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;user&#39;</span>, <span style="color:#e6db74">&#39;body&#39;</span>, <span style="color:#e6db74">&#39;created_at&#39;</span>, <span style="color:#e6db74">&#39;updated_at&#39;</span>]
</span></span></code></pre></div><h3 id="browsable-api">Browsable API</h3>
<p>Let&rsquo;s start the development server and take a look at the working product.</p>
<pre tabindex="0"><code>(tweeter_app) $ python manage.py runserver
</code></pre><p>You should see something similar to this.</p>
<p><img src="../../browseable_api.png" alt="browseable api"></p>
<p>Notice that DRF comes with a robust front end for developers to interact with the API.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Thanks to DRF, you now have a working API and can start sharing endpoints with your team!</p>

    </div>
    
    <div class="post-footer">
      
    </div>
  </article>
  <h4>Comments:</h4>
  <div id="cusdis_thread" data-host="https://cusdis.com"
    data-app-id="00693eb6-18f3-4176-b3ba-cf9245891bce"
    data-page-id="feaa577e223d8321ce89afeb7bcbc48c" 
    data-page-url="http://blog.agilephd.com/posts/django_rest_framework/"
    data-page-title="Django REST Framework">
  </div>
  <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>

    </main>
  </body>
</html>
