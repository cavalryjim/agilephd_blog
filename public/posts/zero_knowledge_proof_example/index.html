<!doctype html>
<html lang="en-us">
  <head>
    <title>Zero-Knowledge Proofs: An Example using Python // AgilePhD</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.128.2">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Dr. James Davis" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.562871a81790ee61fbc41ddb89eacf3bc0967ee9bde46cf8764c66fe91f0e6fc.css" />
    

    
  


    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Zero-Knowledge Proofs: An Example using Python">
  <meta name="twitter:description" content="Here is a simple Python example that demonstrates a zero-knowledge proof. Keeping with the senario described in an earlier introduction to zero-knowledge proofs, I will use the color-blind friend and colored balls scenario as the context.
In this example, I will simulate the process where the prover wants to prove to the verifier, who is color-blind, whether he can distinguish between two balls of different colors without revealing which is which.">

    <meta property="og:url" content="http://blog.agilephd.com/posts/zero_knowledge_proof_example/">
  <meta property="og:site_name" content="AgilePhD">
  <meta property="og:title" content="Zero-Knowledge Proofs: An Example using Python">
  <meta property="og:description" content="Here is a simple Python example that demonstrates a zero-knowledge proof. Keeping with the senario described in an earlier introduction to zero-knowledge proofs, I will use the color-blind friend and colored balls scenario as the context.
In this example, I will simulate the process where the prover wants to prove to the verifier, who is color-blind, whether he can distinguish between two balls of different colors without revealing which is which.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-06T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-08-06T00:00:00+00:00">
    <meta property="article:tag" content="ZKPs">
    <meta property="article:tag" content="Python">


  </head>
  <body>
    <header class="app-header">
      <a href="http://blog.agilephd.com/"><img class="app-header-avatar" src="/tank1.jpg" alt="Dr. James Davis" /></a>
      <span class="app-header-title">AgilePhD</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>Dr. James Davis: data scientist, girl dad, combat veteran, and can&#39;t shutup about Blockchain.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/cavalryjim" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/jdavisphd/" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Zero-Knowledge Proofs: An Example using Python</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Aug 6, 2024
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="http://blog.agilephd.com/tags/zkps/">ZKPs</a>
              <a class="tag" href="http://blog.agilephd.com/tags/python/">Python</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>Here is a simple Python example that demonstrates a zero-knowledge proof. Keeping with the senario described in <a href="https://blog.agilephd.com/posts/zero_knowlege_proof/">an earlier introduction to zero-knowledge proofs</a>, I will use the color-blind friend and colored balls scenario as the context.</p>
<p>In this example, I will simulate the process where the prover wants to prove to the verifier, who is color-blind, whether he can distinguish between two balls of different colors without revealing which is which.</p>
<h3 id="the-code">The Code</h3>
<p>As a note, this code could be utilized in any coding environment but I would recommend a Jupyter Notebook.  A version of the code mentioned in this post can be viewed on <a href="https://github.com/cavalryjim/zkp_example">GitHub</a>.</p>
<h4 id="zkp-class">ZKP Class</h4>
<p>This class contains two balls and methods to shuffle them and verify their order.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> random
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ZeroKnowledgeProof</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>balls <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;Red&#34;</span>, <span style="color:#e6db74">&#34;Green&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">shuffle_balls</span>(self):
</span></span><span style="display:flex;"><span>        random<span style="color:#f92672">.</span>shuffle(self<span style="color:#f92672">.</span>balls)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">verify</span>(self, initial_balls, shuffled_balls):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> initial_balls <span style="color:#f92672">==</span> shuffled_balls
</span></span></code></pre></div><h4 id="function-to-run-the-zkp-object">Function to Run the ZKP Object</h4>
<p>This function runs the zero-knowledge proof multiple times (default 10 iterations). Each iteration involves:</p>
<ul>
<li>Shuffling the balls.</li>
<li>Saving the order of the balls.</li>
<li>The verifier (simulated here) decides to switch the balls or not.</li>
<li>Verifying if the prover correctly identifies the switch.</li>
</ul>
<p>The output will print each iteration&rsquo;s initial and shuffled order, and whether the verification succeeded. If the prover consistently verifies the correct order, the proof is successful, demonstrating the prover can distinguish between the balls without revealing their colors.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">prove_different_colors</span>(zkp, iterations):
</span></span><span style="display:flex;"><span>    n <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> n <span style="color:#f92672">&lt;=</span> iterations:
</span></span><span style="display:flex;"><span>        zkp<span style="color:#f92672">.</span>shuffle_balls()
</span></span><span style="display:flex;"><span>        initial_balls <span style="color:#f92672">=</span> zkp<span style="color:#f92672">.</span>balls<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        choice <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>choice([<span style="color:#66d9ef">True</span>, <span style="color:#66d9ef">False</span>])  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> choice:
</span></span><span style="display:flex;"><span>            zkp<span style="color:#f92672">.</span>balls<span style="color:#f92672">.</span>reverse()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        result <span style="color:#f92672">=</span> zkp<span style="color:#f92672">.</span>verify(initial_balls, zkp<span style="color:#f92672">.</span>balls)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Initial: </span><span style="color:#e6db74">{</span>initial_balls<span style="color:#e6db74">}</span><span style="color:#e6db74">, Shuffled: </span><span style="color:#e6db74">{</span>zkp<span style="color:#f92672">.</span>balls<span style="color:#e6db74">}</span><span style="color:#e6db74">, Verified: </span><span style="color:#e6db74">{</span>result<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> result:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        n <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span></code></pre></div><p>To run the above logic, I initialize a zkp object.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>zkp <span style="color:#f92672">=</span> ZeroKnowledgeProof()
</span></span></code></pre></div><h4 id="function-to-test-the-zkp">Function to Test the ZKP</h4>
<p>Here I am creating a function to test the zero-knowledge proof.  The output will print a success or failure message.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_zpk</span>(zkp, iterations<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>):
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> prove_different_colors(zkp, iterations)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> result <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;Proof successful: The balls are different colors.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;Proof failed.&#34;</span>)
</span></span></code></pre></div><p>Lastly, I am running the test function multiple times.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>):
</span></span><span style="display:flex;"><span>    test_zpk(zkp, <span style="color:#ae81ff">10</span>)
</span></span></code></pre></div><h3 id="conclusion">Conclusion</h3>
<p>If you were the color blind friend, how many times would the prover have to provide the correct answer before you believed him?  Statistically, the probability of getting the order of the balls correct once is 50%.  To get the order correct twice, the probability drops to 25%.  Three times would be 12.5%.  The probability of getting the order of the balls correct 10 times in a row would be 0.09%.  As you can see, the probability is trending toward becoming statistically impossible.</p>

      <h4>Comments:</h4>
      <div id="cusdis_thread" data-host="https://cusdis.com"
        data-app-id="00693eb6-18f3-4176-b3ba-cf9245891bce"
        data-page-id="1c847c6b61a81811500cd02bbe851571" 
        data-page-url="http://blog.agilephd.com/posts/zero_knowledge_proof_example/"
        data-page-title="Zero-Knowledge Proofs: An Example using Python"
        data-theme="auto">
      </div>
      <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
    </div>
    
    <div class="post-footer">
      
    </div>

  </article>

    </main>
  </body>
</html>
